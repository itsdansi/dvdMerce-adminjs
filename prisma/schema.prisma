// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id    Int     @default(autoincrement()) @id
  email String  @unique
  name  String?
  password String
  isAdmin Boolean @default(false)
  movies Movie[]
  dvds     DVD[]
  ratings     Rating[]
  artists  Artist[]
  createdAt DateTime @default(now())
  updatedAt DateTime?
  // deleted Boolean @default(false)
  // deletedAt DateTime?
}

model Genre {
  id          Int      @id @default(autoincrement())
  title       String
  movies     Movie[]
  deleted Boolean @default(false)
  deletedAt DateTime?
  createdAt DateTime @default(now())
  updatedAt DateTime?
}

model Movie {
  id          Int      @id @default(autoincrement())
  title       String
  plot        String?
  genre       Genre? @relation(fields: [genreId], references: [id])
  genreId Int?
  user    User?    @relation(fields: [userId], references: [id])
  userId  Int?
  status   Boolean @default(true)
  dvds     DVD[]
  ratings  Rating[]
  artists  Artist[]
  deleted Boolean @default(false)
  deletedAt DateTime?
  createdAt DateTime @default(now())
  updatedAt DateTime?
}

model DVD {
  id          Int      @id @default(autoincrement())
  title       String
  desc        String?
  sku         Int
  length      String //2h35m
  size        String  //2.5GB or 950MB
  movie       Movie? @relation(fields: [movieId], references: [id])
  movieId Int?
  user    User?    @relation(fields: [userId], references: [id])
  userId  Int?
  status   Boolean @default(true)
  deleted Boolean @default(false)
  deletedAt DateTime?
  createdAt DateTime @default(now())
  updatedAt DateTime?
}

model Rating {
  id          Int      @id @default(autoincrement())
  rating      Int
  movie       Movie? @relation(fields: [movieId], references: [id])
  movieId Int?
  user    User?    @relation(fields: [userId], references: [id])
  userId  Int?
  createdAt DateTime @default(now())
}

model Artist {
  id          Int      @id @default(autoincrement())
  name       String
  characterName        String?
  role         String //any input for now
  movie       Movie? @relation(fields: [movieId], references: [id])
  movieId Int?
  user    User?    @relation(fields: [userId], references: [id])
  userId  Int?
  createdAt DateTime @default(now())
  updatedAt DateTime?
}


